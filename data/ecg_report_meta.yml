
# 请完善此文件中每个字段的生成规则"engine/rule"
# 规则说明：
# "engine" 字段为生成引擎，在工具类中需包含此方法的引用；
# "rule"字段为"engine"方法中接收的参数
# "tag"： 接收一个变量名，在字段生成后将结果赋值给这个变量名。可在后续的字段进行引用
env:
  report_name:
    engine: faker.eq
    rule:
      value: 心电图报告
    
  device_serial:
    engine: faker.eq
    rule:
      value: HL-ECG
    
  template_id:
    engine: faker.from_db_yield
    rule:
      sql: select id from report_detail_properties where name in ('QT', 'PR', 'QTC', 'RV5', 'HR', 'QRSaxis', 'R+S', 'QRS', 'P', 'SV1')
      key: id
    

tables:
  - columns:
    - column: id
      comment: 数据id
      engine: faker.uuid
      rule:
        underline: true
      
    - column: device_id
      comment: 设备id
      engine: faker.from_db
      rule:
        sql: select id from device_info where class_id=(select id from device_classify where serial='{{ env.device_serial }}');
        choice_method: random
        key: id
    - column: hos_id
      comment: 医院id
      engine: faker.from_db
      rule:
        sql: select id from hospital_info where name='海口市人民医院';
        choice_method: first
        key: id
    - column: report_name
      comment: 报告名称
      engine: faker.eq
      rule:
        value: '{{ env.report_name }}'
    - column: photo
      comment: 检测结果图片
      engine: faker.choice_file
      rule:
        path: data/ecg_file
        file_match: .*?\.(png|jpg|bmp|PNG|JPG|BMP)$
        recursion: false
    - column: detection_address
      comment: 检测地点
      engine: null
      rule: null
    - column: nick_name
      comment: 昵称
      engine: null
      rule: null
    - column: avatar
      comment: 头像
      engine: null
      rule: null
    - column: name
      comment: 病人名称
      engine: faker.name
      rule: null
    - column: idcard
      comment: 病人身份号
      engine: faker.ssn
      rule: null
    - column: sincard
      comment: 病人社保卡号
      engine: faker.credit_card_number
      rule:
        card_type: null
    - column: casenum
      comment: 病人病例号
      engine: faker.random_number
      rule:
        digits: 8
    - column: contact
      comment: 病人联系方式
      engine: faker.phone_number
      rule: null
    - column: gender
      comment: 病人性别
      engine: faker.choice
      rule:
        value: [1,0]
    - column: birthday
      comment: 病人出生日期
      engine: null
      rule: null
    - column: address
      comment: 病人地址
      engine: null
      rule: null
    - column: country
      comment: 病人国家
      engine: null
      rule: null
    - column: province
      comment: 病人省份
      engine: null
      rule: null
    - column: city
      comment: 病人所在城市
      engine: null
      rule: null
    - column: district
      comment: 病人所在区
      engine: null
      rule: null
    - column: street
      comment: 病人所在街道地址
      engine: null
      rule: null
    - column: sick_native
      comment: 病人籍贯
      engine: null
      rule: null
    - column: nation
      comment: 病人民族
      engine: null
      rule: null
    - column: blood_type
      comment: 病人血型
      engine: null
      rule: null
    - column: profession
      comment: 病人职业
      engine: null
      rule: null
    - column: height
      comment: 病人身高
      engine: null
      rule: null
    - column: weight
      comment: 病人体重
      engine: null
      rule: null
    - column: bmi
      comment: 体重指数
      engine: null
      rule: null
    - column: history
      comment: 病人标签病史,多个以;隔开
      engine: null
      rule: null
    - column: other_history
      comment: 病人其它病史
      engine: null
      rule: null
    - column: family_history
      comment: 病人标签家族病史,多个以;隔开
      engine: null
      rule: null
    - column: other_family_history
      comment: 病人其它家族病史
      engine: null
      rule: null
    - column: drug_taboos
      comment: 病人药物禁忌
      engine: null
      rule: null
    - column: other_drug_taboos
      comment: 病人其它药物禁忌
      engine: null
      rule: null
    - column: married
      comment: 病人已婚
      engine: null
      rule: null
    - column: have_child
      comment: 病人已育
      engine: null
      rule: null
    - column: status
      comment: 报告状态
      engine: faker.eq
      rule:
        value: 1
    - column: type
      comment: 报告类型 bloodFat--血脂，ami-心梗，bloodGas-血气，bloodGlucose-血糖，bloodOxygen-血氧 bloodPressure-血压，bodyFat-体脂，ecg-心电图,
        D-dimer-D-2聚体、PCT-降钙素原、NT-proBNP-脑钠肽、dynamicEcg-动态心电图
      engine: faker.eq

      rule:
        value: ecg
    - column: sick_identity
      comment: 病人身份可能数据：病人卡号(就诊卡号)、医保卡号、门诊ID
      engine: null
      rule: null
    - column: detection_time
      comment: 测量时间
      engine: faker.now
      rule: null
    - column: create_time
      comment: 检测时间
      engine: faker.now
      rule: null
    - column: update_time
      comment: 更新时间
      engine: faker.now
      rule: null
    - column: creator
      comment: 报告创建者
      engine: null
      rule: null
    - column: reporter
      comment: 诊断医生名称
      engine: null
      rule: null
    - column: record_age
      comment: 报告采集时病人年龄
      engine: null
      rule: null
    - column: apply_doc_name
      comment: 诊断医生名字
      engine: null
      rule: null
    - column: apply_departMent
      comment: 诊断科室
      engine: null
      rule: null
    - column: check_departMent
      comment: 检查科室
      engine: null
      rule: null
    - column: clinc_diagnose
      comment: 临床诊断
      engine: null
      rule: null
    - column: diagnose
      comment: 报告诊断
      engine: null
      rule: null
    - column: description
      comment: 报告诊断
      engine: null
      rule: null
    - column: ward_name
      comment: 病房名称
      engine: null
      rule: null
    - column: bed_number
      comment: 床位号
      engine: null
      rule: null
    - column: check_hospital_name
      comment: 检查医院名称
      engine: null
      rule: null
    - column: remark
      comment: 备注
      engine: null
      rule: null
    - column: hosp_code
      comment: 住院号
      engine: null
      rule: null
    - column: report_prop
      comment: 患者就诊类型 急诊/门诊/住院/体检/会诊
      engine: null
      rule: null
    - column: ecg_status
      comment: 心电图报告状态0-已采集、1-待审核、2、已审核、3-疑问报告、4-已打印、5-已归档
      engine: null
      rule: null
    - column: ecg_status_update_time
      comment: 报告状态更新时间
      engine: null
      rule: null
    - column: critical_value
      comment: 危急值 0 - 正常 1 - 低危 2 - 中危 3 - 高危
      engine: null
      rule: null
    - column: report_image
      comment: 报告图片
      engine: faker.from_db
      rule:
        sql: select report_image from report_info where report_image != 'NULL';
        choice_method: random
        key: report_image
    - column: report_pdf
      comment: 报告pdf
      engine: faker.from_db
      rule:
        sql: select report_pdf from report_info where report_pdf != 'NULL';
        choice_method: random
        key: report_pdf
    - column: signature
      comment: 医生签名
      engine: null
      rule: null
    - column: synchronized_time
      comment: 同步到数据中心时间
      engine: null
      rule: null
    - column: spell_name
      comment: 患者姓名的拼音
      engine: null
      rule: null
    - column: initial_name
      comment: 患者姓名的拼音首字母
      engine: null
      rule: null
    comment: 报告表
    table: report_info

  - columns:
    - column: id
      comment: 数据id
      engine: faker.uuid
      rule:
        underline: true
    - column: template_id
      comment: 数据模板id
      engine: faker.eq
      rule:
        value: '{{ next(env.template_id) }}'
    - column: report_id
      comment: 数据id
      engine: faker.eq
      rule:
        value: '{{ report_info.id }}'
    - column: value
      comment: 检测数据值
      engine: faker.weights_randfloat
      rule:
        - value: [0, 1000]
          weight: 1
    - column: create_time
      comment: 创建时间
      engine: faker.now
      rule: null
    - column: update_time
      comment: 更新时间
      engine: faker.now
      rule: null
    comment: 报告数据表
    table: report_detail_value
    more:  # more字段为true时会循环创建该表字段，表字段中至少要有一个字段类型为迭代器对象，直到遇到迭代器异常循环结束
      max_cnt: 10

